<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core" >
<f:view>
    <h:head>
        <h:outputStylesheet name="webjars/bootstrap/5.3.3/css/bootstrap.min.css"/>
    </h:head>
    <h:body class="bg-light">
        <div class="container-fluid h-100">
            <div class="row">
                <div class="col-md-4 mt-4">
                    <h:form >
                        <div class="input-group">
                            <h:inputText value="#{Controller.search}" class="form-control me-2" ></h:inputText>
                            <span class="input-group-sm" ><h:commandButton value="Search" action="#{Controller.searchResult()}"  class="btn btn-primary btn-sm" ></h:commandButton></span>
                        </div>
                    </h:form>
                </div>
                <div class="col-md-2 mt-4 align-content-lg-end">
                    <h:form action="#{Controller.searchResult()}">
                        <div class="input-group">
                            <h:selectOneMenu value="#{Controller.choix}" onchange="this.form.submit()" class="form-select" immediate="true">
                                <f:selectItem itemLabel="Order By" itemValue="" itemDisabled="true"/>
                                <f:selectItem itemLabel="Nom" itemValue="nom" />
                                <f:selectItem itemLabel="Prenom" itemValue="prenom" />
                                <f:selectItem itemLabel="Year" itemValue="year" />
                                <f:selectItem itemLabel="Email" itemValue="email" />
                                <f:selectItem itemLabel="BirthDay" itemValue="birthDate"/>
                            </h:selectOneMenu>
                        </div>
                    </h:form>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mt-4">
                    <div class="card shadow-lg p-4">
                        <h4 class="text-center mb-4">New Student</h4>
                        <h:form >
                            <h:panelGrid columns="2" cellpadding="5" class="g-3">
                                <h:outputLabel for="nom" value="Nom:"  class="form-label"/>
                                <h:inputText id="nom" value="#{studentBean.nom}" class="form-control" required="true" />

                                <h:outputLabel for="prenom" value="Prénom:" class="form-label" />
                                <h:inputText id="prenom" value="#{studentBean.prenom}" required="true" class="form-control" />

                                <h:outputLabel for="email" value="Email:" class="form-label" />
                                <h:inputText id="email" value="#{studentBean.email}" class="form-control" required="true" />

                                <h:outputLabel for="cne" value="CNE:" class="form-label" />
                                <h:inputText id="cne" value="#{studentBean.cne}" class="form-control" required="true" />

                                <h:outputLabel for="birthDate" value="Date de naissance:" class="form-label" />
                                <h:inputText id="birthDate" value="#{studentBean.birthDate}" pattern="yyyy-MM-dd" required="true" class="form-control">
                                    <f:convertDateTime pattern="yyyy-MM-dd" />
                                </h:inputText>

                                <h:outputLabel for="year" value="Année:" class="form-label" />
                                <h:selectOneMenu id="year" value="#{studentBean.year}" class="form-select" required="true">
                                    <f:selectItem itemLabel="Select Year" itemValue="" itemDisabled="true"/>
                                    <f:selectItem itemLabel="First Year" itemValue="1" />
                                    <f:selectItem itemLabel="Second Year" itemValue="2" />
                                    <f:selectItem itemLabel="Third Year" itemValue="3" />
                                    <f:selectItem itemLabel="Fourth Year" itemValue="4" />
                                    <f:selectItem itemLabel="Fifth Year" itemValue="5" />
                                </h:selectOneMenu>
                            </h:panelGrid>
                            <div class="text-center mt-3">
                                <h:commandButton value="Ajouter" action="#{Controller.AddStudent()}" class="btn btn-primary w-100"/>
                            </div>
                        </h:form>
                    </div>
                </div>

                <div class="col-md-8 mt-4">
                    <h:dataTable var="e" value="#{Controller.getStudents()}" border="1" class="table table-striped table-bordered shadow-sm">
                        <f:facet name="header" class="table-header">
                            <h5>Liste des étudiants</h5>
                        </f:facet>
                        <h:column><f:facet name="header">Prénom</f:facet><h:outputText value="#{e.prenom}" /></h:column>
                        <h:column><f:facet name="header">Nom</f:facet><h:outputText value="#{e.nom}" /></h:column>
                        <h:column><f:facet name="header">Email</f:facet><h:outputText value="#{e.email}"/></h:column>
                        <h:column><f:facet name="header">CNE</f:facet><h:outputText value="#{e.cne}"/></h:column>
                        <h:column><f:facet name="header">Année</f:facet><h:outputText value="#{e.year} année"/></h:column>
                        <h:column><f:facet name="header">Date de naissance</f:facet>
                            <h:outputText value="#{e.birthDate}">
                                <f:convertDateTime pattern="dd-MM-yyyy" />
                            </h:outputText>
                        </h:column>
                        <h:column><f:facet name="header">Action</f:facet>
                            <h:form>
                               <h:commandButton value="Modifier" action="#{Controller.UpdateStudent(e.id)}" class="btn btn-success btn-sm me-2"/>
                                <h:commandButton value="Supprimer" action="#{Controller.DeleteStudent(e.id)}" class="btn btn-danger btn-sm"/>
                            </h:form>
                        </h:column>
                    </h:dataTable>
                </div>
            </div>
        </div>
    </h:body>
</f:view>
</html>